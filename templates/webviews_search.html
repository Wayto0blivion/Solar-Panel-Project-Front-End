{% extends '_base.html' %}

{% from 'bootstrap5/form.html' import render_form, render_field %}

{% block title %}Optimize State Location{% endblock %}

{% block content %}
<div class="container">
    <h1 class="mt-5">Generate State Map</h1>

    <form method="POST" enctype="multipart/form-data">
        {{ form.hidden_tag() }}

        <!-- Render Individual Fields -->
        {{ render_field(form.new_facility_state_code) }}
        {{ render_field(form.states_search) }}

        <!-- Customize the Slider Field -->
        <div class="mb-3">
            {{ form.precision.label(class="form-label") }}
            {{ form.precision(
                class="form-range",
                type="range",
                min="0.02",
                max="0.5",
                step="0.01",
                value=form.precision.data or form.precision.default,
                oninput="outputPrecision.value = precision.value",
                id="precision"
            ) }}
            <output id="outputPrecision">{{ form.precision.data or form.precision.default }}</output>
        </div>

        {{ render_field(form.max_travel_time) }}

        <!-- Render the Submit Button -->
        {{ render_field(form.submit) }}
    </form>

    <div class="mt-4">
        <!-- ... (Your instructions or additional content) ... -->
    </div>
</div>

<!-- Optional JavaScript for Slider Output -->
<script>
    const precisionSlider = document.getElementById('precision');
    const outputPrecision = document.getElementById('outputPrecision');
    precisionSlider.oninput = function() {
        outputPrecision.value = this.value;
    };
</script>

<div class="container">
        <p>
            To Generate a new map: <br>
            Enter a state abbreviation in 'New Facility State Code'. <br>
            Enter a group of state abbreviations, separated by commas, to include multiple states in the map. Leaving it blank will use the state from 'New Facility State Code'. <br>
            Adjust the precision of the gridmap. The larger the value in 'Search Precision', the more coarse the search will be. <br>
            Set a 'Maximum Travel Time' in hours. This is the maximum travel time from the coordinate that a location can be to be included in the search.
        </p>
</div>
{% endblock %}
